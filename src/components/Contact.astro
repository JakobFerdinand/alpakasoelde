<section id="kontakt" class="contact section">
  <h2>Kontakt</h2>
  <div class="contact-content container">
    <form id="contact-form" name="contact" method="post" action="#" class="contact-card">
      <div class="form-field">
        <label for="name">Name*</label>
        <input id="name" type="text" name="name" autocomplete="name" required placeholder="Dein Name" />
      </div>
      <div class="form-field">
        <label for="email">E-Mail*</label>
        <input id="email" type="email" name="email" autocomplete="email" required placeholder="deine@mail.at" />
      </div>
      <div class="form-field">
        <label for="message">Nachricht*</label>
        <textarea id="message" name="message" required placeholder="Deine Nachricht"></textarea>
      </div>
      <button type="submit" class="btn">Senden</button>
    </form>
    <aside class="contact-address">
      <header>
        <svg width="24" height="24" fill="currentColor" aria-hidden="true">
          <path d="M12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7z"/>
        </svg>
        <h3>Standort</h3>
      </header>
      <address>
        Frauenstein 12<br/>
        4962 Mining
      </address>
      <div class="map-frame">
        <iframe
          title="OpenStreetMap location"
          src="https://www.openstreetmap.org/export/embed.html?bbox=12.96%2C48.21%2C13.0%2C48.23&layer=mapnik&marker=48.22%2C12.98"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </aside>
  </div>
</section>

<script type="module">
  const form = document.getElementById('contact-form');
  form?.addEventListener('submit', async (ev) => {
    ev.preventDefault();
    const data = {
      name: form.name.value,
      email: form.email.value,
      message: form.message.value
    };
    await fetch('/api/SendContact', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    form.reset();
  });
</script>

<style>
  .contact {
    background-color: var(--dusty-sky);
    color: var(--vanilla-cream);
  }

  .contact-content {
    display: grid;
    gap: 2rem;
    grid-template-areas:
      "form"
      "address";
  }

  .contact-address {
    grid-area: address;
    background: var(--vanilla-cream);
    color: var(--slate-river);
    padding: 1.5rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .contact-address header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .contact-address h3 {
    margin: 0;
    font-size: 1.25rem;
  }

  .contact-address address {
    font-style: normal;
    line-height: 1.5;
  }

  .map-frame {
    width: 100%;
    height: 250px;
    border-radius: 0.5rem;
    overflow: hidden;
  }

  .map-frame iframe {
    width: 100%;
    height: 100%;
    border: 0;
  }

  .contact-card {
    grid-area: form;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    background-color: var(--vanilla-cream);
    padding: 2rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  @media (min-width: 768px) {
    .contact-content {
      grid-template-columns: 1fr 1fr;
      grid-template-areas: "form address";
    }
  }

  .form-field {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .contact input,
  .contact textarea {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--slate-river);
    border-radius: 0.25rem;
    background-color: var(--vanilla-cream);
    color: var(--slate-river);
    font-size: 1rem;
  }

  .contact textarea {
    height: 8rem;
    resize: vertical;
  }

  .contact input:focus,
  .contact textarea:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--warm-honey);
  }

  .contact button {
    background-color: var(--warm-honey);
    color: var(--vanilla-cream);
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 0.375rem;
    font-weight: 600;
    cursor: pointer;
  }

  .contact button:hover {
    background-color: var(--olive-leaf);
  }
</style>
